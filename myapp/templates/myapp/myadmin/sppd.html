{% extends "base_admin.html" %}

{% block style %}
{% load static %}
<link href="{% static 'assets/global/plugins/datatables/datatables.min.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css' %}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block content %}
<div class="page-content-wrapper">
    <!-- BEGIN CONTENT BODY -->
    <div class="page-content">
        <!-- BEGIN PAGE HEADER-->
        <!-- BEGIN THEME PANEL -->
        <div class="theme-panel hidden-xs hidden-sm">
            <div class="toggler"> </div>
            <div class="toggler-close"> </div>
        </div>
        <!-- END THEME PANEL -->
        <!-- BEGIN PAGE BAR -->
        <div class="page-bar">
            <ul class="page-breadcrumb">
                <li>
                    <a href="{% url 'myapp_index' %}">Home</a>
                    <i class="fa fa-circle"></i>
                </li>
                <li>
                    <a href="#">Tables</a>
                    <i class="fa fa-circle"></i>
                </li>
                <li>
                    <span>Datatables</span>
                </li>
            </ul>
            
        </div>
        <!-- END PAGE BAR -->
        <!-- BEGIN PAGE TITLE-->
        <h1 class="page-title"> Sppd
            <small>Data Table</small>
        </h1>
        <!-- END PAGE TITLE-->
        <!-- END PAGE HEADER-->
        <div class="row">
            <div class="col-md-12">
                <!-- BEGIN EXAMPLE TABLE PORTLET-->
                <div class="portlet light bordered">
                    <div class="portlet-title">
                        <div class="caption font-dark">
                            <i class="icon-settings font-dark"></i>
                            <span class="caption-subject bold uppercase">Data</span> 
                        </div>
                        {% if jumlah_none != 0 %}
                        <span class="badge badge-danger right">Terdapat {{ jumlah_none }} data yang belum dilengkapi, silakan cek di surat perintah</span>
                        {% endif %}
                        <div class="actions">
                            
                        </div>
                        <div class="tools"> </div>
                    </div>
                    <div class="portlet-body">
                        <table class="table table-striped table-bordered table-hover dt-responsive" width="100%" id="dataTable">
                            <thead>
                                <tr>
                                    <th class="">No</th>
                                    <th class="">Nomor SP</th>
                                    <th class="">Nomor SPPD</th>
                                   
                                    <th class="">Tanggal</th>
                                    <!-- <th class="">Status</th> -->
                                    <th class=""></th>
                                </tr>
                            </thead>
                            <tbody>
                            	{% for value in sppd %}
                            	<tr>
                            		<td>{{ forloop.counter }}</td>
                            		<td>{{ value.surat_perintah.nomor }}</td>
                            		<td>
                                        {% if value.nomor == None %}
                                            <span class="btn btn-info">masih kosong</span>
                                        {% else %}
                                            {{ value.nomor }}
                                        {% endif %}

                                    </td>
                            		
                            		<td>{{ value.surat_perintah.tanggal |date:"d-m-o" }}</td>
                            		<!-- <td></td> -->
                            		<td>
                                        {% if value.nomor != None %}
                                        <a href="{% url 'myapp_show_sppd_admin' value.id %}" class="btn blue btn-outline">lihat</a>
                                        {% endif %}

                                         <a href="{% url 'myapp_update_sppd_admin' value.id %} " class="btn blue btn-outline" >Ubah</a>
                                        <a href="{% url 'myapp_delete_surat_perintah_admin_' value.surat_perintah.id %} " class="btn red btn-outline" onclick="return confirm('apa anda yakin ingin hapus?')" >Hapus</a>

                                        {% if value.nomor == None %}
                                        <a href="{% url 'myapp_update_sppd_admin' value.id %} " class="btn btn-danger" >No Sppd Belum ada</a>
                                        {% endif %}

                                        
                                    </td>
                            	</tr>
                            	{% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- END EXAMPLE TABLE PORTLET-->
            </div>
        </div>
    </div>
    <!-- END CONTENT BODY -->
</div>

{% endblock %}

{% block scripts %}
	<script src="{% static 'assets/global/scripts/datatable.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/global/plugins/datatables/datatables.min.js' %}" type="text/javascript"></script>
    <script src="{% static 'assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js' %}" type="text/javascript"></script>
    <script type="text/javascript">
        $('#dataTable').DataTable({
            // processing: true,
            // serverSide: true,
            // columns: [
            //     {data: 'id', name: 'id'},
            //     {data: 'nomor_sp', name: 'nomor_sp'},
            //     {data: 'nomor', name: 'nomor'},
            //     {data: 'nama', name: 'nama'},
            //     {data: 'tanggal', name: 'tanggal'},
            //     {data: 'status', name: 'status'},
            //     {data: 'action', name: 'action', orderable: false, searchable: false}
            // ]
        });
    </script>
{% endblock %}